[gd_scene load_steps=18 format=3 uid="uid://bsgw214l8i5kg"]

[ext_resource type="Script" path="res://scenes/player/player.gd" id="2_3rg7b"]
[ext_resource type="PackedScene" uid="uid://bbu8j4sjdr8cc" path="res://scenes/levels/basement.tscn" id="2_mapes"]
[ext_resource type="Theme" uid="uid://d3dpxc0131y0n" path="res://data/ui_theme.tres" id="2_xrdut"]
[ext_resource type="PackedScene" uid="uid://ca257y0ga2whr" path="res://scenes/retro_game_tv.tscn" id="10_yxiqj"]
[ext_resource type="PackedScene" uid="uid://3gf5odwhm0lb" path="res://scenes/levels/scenelet_chapter_3.tscn" id="11_lxyik"]
[ext_resource type="PackedScene" uid="uid://dxhry5e3nrmwj" path="res://scenes/props/guitar.tscn" id="11_pev0o"]
[ext_resource type="AudioStream" uid="uid://behwaqadkh504" path="res://assets/music/683457__seth_makes_sounds__dope-video-game-boss-music.wav" id="11_vim10"]
[ext_resource type="Script" path="res://assets/models/props/tv.gd" id="12_8ftgm"]
[ext_resource type="PackedScene" uid="uid://bxmgiekbat0a6" path="res://assets/models/props/tv.glb" id="12_yp4lc"]
[ext_resource type="Script" path="res://scenes/levels/friend_zone.gd" id="14_y1fqq"]
[ext_resource type="AudioStream" uid="uid://dccpllki87rju" path="res://assets/sfx/ambient-755324__klankbeeld__basement-room-tone-420-pm-220811_0491.wav" id="27_ob5y4"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_2q7ol"]
radius = 0.225
height = 1.25223

[sub_resource type="Environment" id="Environment_yvrrh"]
background_mode = 1
background_color = Color(0.440801, 0.745696, 0.863281, 1)
ambient_light_color = Color(0.219998, 0.798684, 0.804688, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_318m4"]
shading_mode = 0
albedo_color = Color(0.09375, 0.09375, 0.09375, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_d2hyq"]
resource_local_to_scene = true
shading_mode = 0

[sub_resource type="BoxShape3D" id="BoxShape3D_d2sc6"]
size = Vector3(2.50525, 3.50085, 2.87384)

[sub_resource type="CylinderShape3D" id="CylinderShape3D_uy4bt"]
radius = 0.170979

[node name="main" type="Node3D"]

[node name="player" type="CharacterBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.25965, 1.32832, 16.6633)
collision_layer = 4
script = ExtResource("2_3rg7b")
jump_impulse = 3.0
acceleration = 12.0
deceleration = 20.0
max_speed = 2.8
hold_drag_force = 10.58

[node name="camera" type="Camera3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 0.841511, 0.54024, 0, -0.54024, 0.841511, 0, 0.0499091, 0)
current = true

[node name="interaction_ray" type="RayCast3D" parent="player/camera"]
target_position = Vector3(0, 0, -2)
collision_mask = 258
collide_with_areas = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.377948, 0)
shape = SubResource("CapsuleShape3D_2q7ol")

[node name="hold_point" type="Marker3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.258331, -0.171823, -0.514982)

[node name="talk" type="Label" parent="player"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_xrdut")
text = "Talk?"

[node name="pickup" type="Label" parent="player"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -11.5
offset_right = 20.0
offset_bottom = 11.5
grow_horizontal = 2
grow_vertical = 2
theme = ExtResource("2_xrdut")
text = "Pick up?"

[node name="upright_pos" type="Marker3D" parent="player"]

[node name="crouched_pos" type="Marker3D" parent="player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.451616, 0)

[node name="guitar_holder" type="Marker3D" parent="player"]
transform = Transform3D(-0.437911, -0.898462, 0.0316151, -0.409936, 0.230853, 0.882416, -0.800116, 0.373459, -0.469406, 0.239293, -0.236066, -0.227325)

[node name="remote_transform_3d" type="RemoteTransform3D" parent="player/guitar_holder"]

[node name="world_environment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_yvrrh")

[node name="directional_light_3d" type="DirectionalLight3D" parent="."]
transform = Transform3D(0.789148, -2.98023e-08, -0.614202, 0.504168, 0.571143, 0.647773, 0.350798, -0.82085, 0.450717, 0, 12.0171, 5.57826)
light_energy = 0.779
shadow_enabled = true

[node name="csg_box_3d" type="CSGBox3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.93139, 0.346608, 6.84823)
size = Vector3(0.412598, 0.638672, 0.422852)

[node name="csg_sphere_3d" type="CSGSphere3D" parent="csg_box_3d"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.48648, 0)
radius = 0.274255

[node name="tv_viewport" type="SubViewport" parent="."]
size = Vector2i(320, 240)

[node name="retro_game" parent="tv_viewport" instance=ExtResource("10_yxiqj")]
offset_right = 0.0
offset_bottom = 0.0

[node name="tv" parent="." node_paths=PackedStringArray("viewport") instance=ExtResource("12_yp4lc")]
transform = Transform3D(0.293114, 0, -0.133191, 0, 0.321955, 0, 0.133191, 0, 0.293114, 1.4702, 1.19209e-07, 6.53634)
script = ExtResource("12_8ftgm")
off_material = SubResource("StandardMaterial3D_318m4")
viewport_material = SubResource("StandardMaterial3D_d2hyq")
viewport = NodePath("../tv_viewport")

[node name="sound" type="AudioStreamPlayer3D" parent="tv"]
transform = Transform3D(-1.08943, 0, 2.9087, 0, 3.10602, 0, -2.9087, 0, -1.08943, 0, 1.78729, 0)
stream = ExtResource("11_vim10")
attenuation_model = 1
volume_db = -40.0
bus = &"sfx"

[node name="static_body_3d" type="StaticBody3D" parent="tv"]

[node name="collision_shape_3d" type="CollisionShape3D" parent="tv/static_body_3d"]
transform = Transform3D(1, 0, 2.98023e-08, 0, 1, 0, -2.98023e-08, 0, 1, 0.154716, 1.25043, -0.0136251)
shape = SubResource("BoxShape3D_d2sc6")

[node name="omni_light_3d" type="OmniLight3D" parent="tv"]
transform = Transform3D(1, 0, -3.838e-08, 0, 1, 0, 3.838e-08, 0, 1, 1.29021, 1.84343, 0.142409)
light_energy = 1.662
shadow_enabled = true
omni_range = 4.721
omni_attenuation = 1.028

[node name="basement" parent="." instance=ExtResource("2_mapes")]

[node name="ambience" type="AudioStreamPlayer" parent="."]
stream = ExtResource("27_ob5y4")
volume_db = 2.066
autoplay = true

[node name="friend_zone" type="Area3D" parent="." node_paths=PackedStringArray("timer")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 2.52504, 0, 7.65482)
collision_layer = 0
collision_mask = 4
script = ExtResource("14_y1fqq")
timer = NodePath("friend_timer")

[node name="collision_shape_3d" type="CollisionShape3D" parent="friend_zone"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.159528, 0, -0.247471)
shape = SubResource("CylinderShape3D_uy4bt")

[node name="friend_timer" type="Timer" parent="friend_zone"]
wait_time = 1.5
one_shot = true

[node name="guitar" parent="." instance=ExtResource("11_pev0o")]
transform = Transform3D(0.890927, 0.44599, -0.0856822, 0, 0.188667, 0.982041, 0.454146, -0.874927, 0.168088, 8.47919, 0.749997, 15.3189)
hand_pos = 0
finger_0_pos = 1
finger_1_pos = 4
finger_2_pos = 0
finger_3_pos = 5

[node name="scenelet_chapter3" parent="." instance=ExtResource("11_lxyik")]

[editable path="tv"]
